<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Task list</title>

    <link rel="stylesheet" type="text/css" href="resources/styles/tasks.css"	media="screen" />
    <script src="resources/scripts/jquery-2.0.3.js"></script>
    <script src="resources/scripts/jquery-tmpl.js"></script>
    <script src="resources/scripts/jquery.validate.js"></script>
    <script src="resources/scripts/jquery-serialization.js"></script>
    <script src="resources/scripts/tasks-controller.js"></script>
    <script src="resources/scripts/date.js"></script>
    <script src="resources/scripts/jquery-tablesorter.js"></script>

    <link rel="stylesheet" href="resources/styles/customcss.css" type="text/css"/>


</head>
<body>
<header>
    <span>Task list</span>
</header>
<main  id="taskPage">
    <section id="taskTeam" class="not">
        <form id="teamForm">
            <h3>Team</h3>
            <div>
                <label>Name</label> <input type="text" required="required" name="txtTeam" id = "txtTeam" class="large" placeholder="Name" maxlength="200"  />
            </div>
            <div>
                <label>Description</label> <input type="text" required="required" name="txtDescription" id = "txtDescription" class="large" placeholder="Name" maxlength="200"  />
            </div>
            <div>
                <label>Head</label>
                <select name="head" id="head">
                    <option value="user1">user1</option>
                    <option value="user2">user2</option>
                    <option value="user3">user3</option>
                </select>
            </div>
            <nav>
                <a href="#" id="saveTeam">Save Team</a>    <!-- https://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used -->
                <a href="#" id="clearTeam">Clear Team</a>
            </nav>
        </form>

    </section>

    <section class="not" id="secTeams">
       <h6>All the Available teams</h6>
        <table id="tblTeams">
            <colgroup>
                <col width="5%">
                <col width="25%">
                <col width="25%">
                <col width="20%">
                <col width="25%">
            </colgroup>
            <thead>
            <tr>
                <th><input type="button" id="btnTeamID" value="#" class=" btn-primary-outline" /> </th>
                <th><input type="button" id="btnTeamName" value="Name" class=" btn-primary-outline" /> </th>
                <th><input type="button" id=btnTeamDescription" value="Description" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnTeamHead" value="Team Head" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnTeamActions" value="Actions" class=" btn-primary-outline" /></th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </section>

    <section id="taskUsers" class="not">
        <form id="userForm">
            <h6>Add new user</h6>

            <div>
                <label>First name</label> <input type="text" required="required" name="txtFName" id = "txtFName" class="large" placeholder="First Name" maxlength="200"  />
            </div>
            <div>
                <label>Last name</label> <input type="text" required="required" name="txtLName" id = "txtLName" class="large" placeholder="Last Name" maxlength="200"  />
            </div>
            <div>
                <label>Phone</label> <input type="text" required="required" name="txtPhone" id = "txtPhone" class="large" placeholder="Phone" maxlength="200"  />
            </div><div>
            <label>Email</label> <input type="text" required="required" name="txtEmail" id = "txtEmail" class="large" placeholder="Email address" maxlength="200"  />
            </div>
            <div>
                <label>Team</label>
                <select name="head" id="team">
                    <option value="teamA">TeamA</option>
                    <option value="teamB">teamB</option>
                    <option value="teamC">teamC</option>
                </select></div>
            <nav>
                <a href="#" id="saveUser">Save User</a>    <!-- https://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used -->
                <a href="#" id="clearUser">Clear</a>
            </nav>
        </form>

    </section>

    <section class="not" id="secUsers">
        <h6>All the Available Users</h6>
        <table id="tblUsers">
            <colgroup>
                <col width="5%">
                <col width="14%">
                <col width="14%">
                <col width="14%">
                <col width="14%">
                <col width="14%">
                <col width="25%">
            </colgroup>
            <thead>
            <tr>
                <th id="test"><input type="button" id="btnUser" value="#" class=" btn-primary-outline" /> </th>
                <th><input type="button" id=btnFName" value="First Name" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnLName" value="Last Name" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnPnone" value="Phone" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnEmail" value="Email" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnTeam" value="Team" class=" btn-primary-outline" /></th>
                <th><input type="button" id="btnUserActions" value="Actions" name="sort" class="btn-primary-outline" /></th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </section>

    <section id="taskCreation" class="not">
        <form id="taskForm">
            <input type="hidden" name="id"/>
            <div>
                <label>Task</label> <input type="text" required="required" name="task" id = "task" class="large" placeholder="Breakfast at Tiffanys" maxlength="200"  />
            </div>

            <div>
                <label>User ID</label> <input type="text" required="required"
                                              name="userId" id="userId" class="large" placeholder="User ID" maxlength="200"  />
            </div>
            <div>
                <label>Required by</label> <input type="date" required="required" name="requiredBy" id="requiredBy" />

            </div>
            <div>
                <label>Priority</label>
                <select name="priority" id="priority">
                    <option value="High">High</option>
                    <option value="Medium">Medium</option>
                    <option value="Low">Low</option>
                </select></div>
            <div>
                <label>Category</label> <select name="category" id="category">
                <option value="Personal">Personal</option>
                <option value="Work">Work</option>
            </select>
            </div>
            <nav>
                <a href="#" id="saveTask">Save task</a>    <!-- https://stackoverflow.com/questions/4855168/what-is-href-and-why-is-it-used -->
                <a href="#" id="clearTask">Clear task</a>
            </nav>
        </form>
    </section>
    <section>
        <input type="hidden" value="" name="direction"/>
        <h6>All the availabe tasks (select a row to filter by user)</h6>
        <table id="tblTasks">
            <colgroup>
                <col width="5%">
                <col width="20%">
                <col width="15%">
                <col width="15%">
                <col width="10">
                <col width="10%">
                <col width="25%">
            </colgroup>
            <thead>
            <tr>
                <th><input type="button" id="btnId" value="#"  name="sort" class="btn-primary-outline" /> </th>
                <th><input type="button" id="btnName" value="Name"  name="sort" class="btn-primary-outline" /> </th>
                <th><input type="button" id="btnUserId" value="User" name="sort" class="btn-primary-outline" /></th>
                <th><input type="button" id="btnDue" value="Due" name="sort" class="btn-primary-outline" /></th>
                <th><input type="button" id="btnPriority" value="Priority" name="sort" class="btn-primary-outline" /></th>
                <th><input type="button" id="btnCategory" value="Category" name="sort" class="btn-primary-outline" /></th>
                <th><input type="button" id="btnActions" value="Actions" name="sort" class="btn-primary-outline" /></th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>

        <nav>
            <a href="#" id="btnAddTask">Add Task</a>
            <a href="#" id="bthAddTeam">Add Team</a>
            <a href="#" id="bthAddUser">Add User</a>
            <a href="#" id="btnFilterTask">Filter Tasks</a>
        </nav>
    </section>
</main>
<footer>You have <span id="taskCount"></span> tasks</footer>
</body>
<script>
    function initScreen() {
        $(document).ready(function() {
            tasksController.init($('#taskPage'), function() {
                /*tasksController.loadTasks();*/
                /*alert("dsdsdsdsd");*/

                tasksController.retrieveTasksServer();
                //tasksController.retrieveTeams();
            });
        });
    }
    if (window.indexedDB) {
        console.log("using indexedDB 111917kl");
        $.getScript( "resources/scripts/tasks-indexeddb.js" )
            .done(function( script, textStatus ) {
                initScreen();
            })
            .fail(function( jqxhr, settings, exception ) {
                console.log( 'Failed to load indexed db script' );
            });
    } else if (window.localStorage) {
        console.log("using webstorage 111917kl");
        $.getScript( "resources/scripts/tasks-webstorage.js" )
            .done(function( script, textStatus ) {
                initScreen();
            })
            .fail(function( jqxhr, settings, exception ) {
                console.log( 'Failed to load web storage script' );
            });
    }
</script>

<script id="taskRow" type="text/x-jQuery-tmpl">
<tr>
    <td {{if complete == true}}class="taskCompleted"{{/if}}>${id}</td>
    <td {{if complete == true}}class="taskCompleted"{{/if}}>${task}</td>
	<td {{if complete == true}} class="taskCompleted"{{/if}}>${userId}</td>
	<td {{if complete == true}}class="taskCompleted"{{/if}}><time datetime="${requiredBy}">${requiredBy}</time></td>
	<td {{if complete == true}} class="taskComplete"{{/if}}>${priority}</td>
	<td {{if complete == true}}class="taskCompleted"{{/if}}>${category}</td>
	<td>
		<nav>
			{{if complete != true}}
				<a href="#" class="editRow" data-task-id="${id}">Edit</a>
				<a href="#" class="completeRow" data-task-id="${id}">Complete</a>
			{{/if}}
			<a href="#" id="btnDelete" class="deleteRow" data-task-id="${id}">Delete</a>
            <input class="nr" type="hidden" id="taskId" value="${id}"/>
		</nav>
	</td>
</tr>
</script>
<script id="teamRow" type="text/x-jQuery-tmpl">
<tr>
	<td {{if complete == true}}class="teamCompleted"{{/if}}>${id}</td>
	<td {{if complete == true}}class="teamCompleted"{{/if}}>${name}</td>
	<td {{if complete == true}} class="teamCompleted"{{/if}}>${description}</td>
	<td {{if complete == true}} class="teamCompleted"{{/if}}>${head}</td>
	<td>
		<nav>
			{{if complete != true}}
				<a href="#" class="editRow" data-team-id="${id}">Edit</a>
				<a href="#" class="completeRow" data-team-id="${id}">Complete</a>
			{{/if}}
			<a href="#" class="deleteRow" data-team-id="${id}">Delete</a>
		</nav>
	</td>
</tr>
</script>

<script id="userRow" type="text/x-jQuery-tmpl">
<tr>
	<td {{if complete == true}}class="userCompleted"{{/if}}>${id}</td>
	<td {{if complete == true}} class="userCompleted"{{/if}}>${fName}</td>
	<td {{if complete == true}} class="userCompleted"{{/if}}>${lName}</td>
	<td {{if complete == true}} class="userCompleted"{{/if}}>${phone}</td>
	<td {{if complete == true}} class="userCompleted"{{/if}}>${email}</td>
	<td {{if complete == true}} class="userCompleted"{{/if}}>${team}</td>
	<td>
		<nav>
			{{if complete != true}}
				<a href="#" class="editRow" data-user-id="${id}">Edit</a>
				<a href="#" class="completeRow" data-user-id="${id}">Complete</a>
			{{/if}}
			<a href="#" class="deleteRow" data-user-id="${id}">Delete</a>
		</nav>
	</td>
</tr>
</script>
<!--<script>
    $(document).ready(function()
        {
            $("#tblTasks").tablesorter();
        }
    );
</script>-->
<script type="javascript">
    function ConfirmDelete(){
        if (confirm("Delete this?")){
            return true;
        }
        else {
            return false;
        }
    }
</script>

</html>

